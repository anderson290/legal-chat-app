<div class="">
  <div class="close" (click)="dismissModal()">&times;</div>
  <h4 class="text-center">Abertura de Chamado</h4>

</div>

<ion-content #content *ngIf="ticket?.status == 'inProgress'">
  <ion-grid>
    <ion-row *ngFor="let chat of ticket?.conversation">
      <ion-col size="9" class="botChat" *ngIf="currentUser !== chat.userType">
        <b>{{chat.userType}}</b>
        <p>{{chat.message}}</p>
        <div class="date" text-right>{{chat.createdAt | date:'short'}}</div>
      </ion-col>
      <ion-col offset="3" size="9" class="userChat" *ngIf="currentUser === chat.userType">
        <b>Você</b>
        <p>{{chat.message}}</p>
        <div class="date" text-right>{{chat.createdAt | date:'short'}}</div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-content *ngIf="!ticket || ticket?.status != 'inProgress'">
  <ion-item>
    <ion-label position="floating">Título</ion-label>
    <ion-input [(ngModel)]="ticketModel.title"></ion-input>
  </ion-item>
  <ion-item>
    <ion-label position="floating">Mensagem</ion-label>
    <ion-textarea name="initialTextarea" [(ngModel)]="ticketModel.conversation.message"></ion-textarea>
  </ion-item>
</ion-content>
<ion-footer *ngIf="!ticket || ticket?.status != 'inProgress'">
    <ion-button expand="full" class="full-button" (click)="sendMessage('new')">Solicitar Chamado</ion-button>
</ion-footer>

<form (ngSubmit)="sendMessage()">
  <ion-footer *ngIf="ticket?.status == 'inProgress'">
    <ion-grid>
      <ion-row>
        <ion-col size="10">
          <ion-item>
            <ion-label position="floating">Mensagem</ion-label>
            <ion-textarea name="textarea" [(ngModel)]="textMessage"></ion-textarea>
          </ion-item>
        </ion-col>
        <ion-col size="2">
          <ion-button expand="block" fill="clear" class="btn-send" (click)="sendMessage()">
            <ion-icon name="send" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>

  </ion-footer>

</form>